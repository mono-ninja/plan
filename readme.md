# Plan – WordPress Plugin

**Plan** — це легкий плагін для створення та керування тарифними планами (pricing plans) у WordPress.  
Плагін дозволяє створювати кастомні плани з цінами, кнопками, особливостями (features), статусами та відображати їх на сайті через шорткод.

---

## Встановлення

1. Скачайте або клонувати репозиторій у папку: `wp-content/plugins/plan`
2. Активуйте плагін у розділі **Плагіни → Активувати**.
3. Після активації з’явиться новий тип записів **Plans** у адмін-панелі.

---

## Вимоги

- **WordPress:** 6.8.2+
- **PHP:** 7.4+
- **MySQL/MariaDB:** 5.5+ / 10.3+

---

## Інструкція

### 1. Створення нового плану
- Увійдіть у WordPress адмінку.
- В меню зліва знайдіть розділ Plans.
- Натисніть Add New.
- У полі Title введіть назву плану (наприклад: Basic, Pro, Enterprise).

### 2. Загальні параметри плану (Plan Details)
- **Price** — числове значення ціни (наприклад, 19, 49.99).
- **Custom Price Label** — текст, який замінює ціну (наприклад, Contact Us, Free, Custom Quote).
- **Button Text** — текст кнопки (наприклад, Buy Now, Subscribe, Get Started).
- **Button Link** — URL, на який веде кнопка (посилання на checkout або зовнішню сторінку).

### 3. Features (Plan Features)
Це список можливостей/переваг плану.

1. Натисніть **\+ Add Feature**, щоб додати новий рядок.
2. У кожному рядку введіть одну опцію (наприклад: _10 Projects_, _Unlimited Users_, _Priority Support_).

Features можна перетягувати мишкою, щоб змінювати порядок. Зайві елементи можна видалити кнопкою **–**.

### 4. Статуси (Plan Status)

Три чекбокси для керування статусами плану:
- **Annual** — план є річним (показується у перемикачі Monthly / Annual).
- **Recommended** — додає бейдж «Recommended» для підсвітки.
- **Enabled** — якщо вимкнути, план не відображатиметься на фронтенді.

### 5. Порядок відображення
- У вкладці праворуч знайдіть поле Order.
- Чим менше число — тим вище план у списку.
- Використовується для сортування на фронтенді.


### 6.Публікація
- Натисніть Publish, щоб зробити план доступним.
- Якщо план не потрібен на сайті, зніміть галочку Enabled або перемістіть його у Draft/Trash.

### 7. Вивід планів на фронтенді
Використовуйте шорткод: `[plans]`

---

## Можливості
- Кастомний тип записів plan без публічних сторінок (немає archive/single).
- Зреження метаданих для планів:
- Ціна або кастомний текст (напр. Contact Us).
- Features — список особливостей плану.
- Кнопка (текст + посилання).
- Статуси: Annual, Recommended, Enabled.
- Віджет для перемикання Monthly/Annual.
- Вивід на фронтенді з адаптивною сіткою (CSS Grid).
- Кешування запитів WP_Query через Transients API.
- Інвалідовування кешу при збереженні/видаленні плану.
- Підтримка Quick Edit у таблиці записів.
  
## Архітектура
- `classes/Core` — базова логіка, кеш, публікація.
- `classes/CPT` — кастомний тип записів plan, метабокси (General, Features, Status), колонки в адмінці.
- `assets/css` — стилі для адмінки та фронтенду.
- `assets/js` — JS для UI (features reorder, switcher).
- `uninstall.php` — повне очищення даних і кешу при видаленні плагіна.

## Нотатки

- Всі мета-поля зберігаються як post_meta (price, features, is_enabled і т.д.).
- Кешування реалізоване через transient plans_query_cache. TTL = 0 (може бути змінено).
- Архітектура розділена на менеджери модулів (Core, CPT) для чистоти та розширюваності.
- Плагін використовує final class Plan як Singleton, що інкапсулює ініціалізацію.
- Файл **uninstall.php**:
  - Виконується автоматично при видаленні плагіна через WordPress адмінку.
  - Очищає кеш (transients).
  - Видаляє мета-поля, що використовуються плагіном.
  - Видаляє всі кастомні записи `plan`  (форсоване видалення).
  
## Ліцензія

GPL-3.0-or-later.